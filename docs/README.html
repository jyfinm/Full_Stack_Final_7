
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Example Project Using the ChartBook Template &#8212; Full-Stack Quantitative Finance Final Project #7</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=b9472d72"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'README';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="pull_CRSP_bond_returns" href="apidocs/pull_CRSP_bond_returns/pull_CRSP_bond_returns.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>   
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Full-Stack Quantitative Finance Final Project #7 - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Full-Stack Quantitative Finance Final Project #7 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Full-Stack Quantitative Finance Final Project 7: Replicating the Nozawa Corporate Bond Portfolios from He, Kelly, and Manela (2017)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Notebooks 📖</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="notebooks/01_yield_spreads.html">Replicating the Nozawa Corporate Bond Portfolios from He, Kelly, and Manela (2017)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation 📜</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="apidocs/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="apidocs/calc_metrics/calc_metrics.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">calc_metrics</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="apidocs/calc_nozawa_portfolio/calc_nozawa_portfolio.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">calc_nozawa_portfolio</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="apidocs/generate_plot/generate_plot.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">generate_plot</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="apidocs/generate_table/generate_table.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">generate_table</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="apidocs/misc_tools/misc_tools.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">misc_tools</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="apidocs/pull_bondret_treasury/pull_bondret_treasury.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pull_bondret_treasury</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="apidocs/pull_CRSP_bond_returns/pull_CRSP_bond_returns.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pull_CRSP_bond_returns</span></code></a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix 💡</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Example Project Using the ChartBook Template</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jyfinm/Full_Stack_Final_7" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jyfinm/Full_Stack_Final_7/issues/new?title=Issue%20on%20page%20%2FREADME.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/README.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Example Project Using the ChartBook Template</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about-this-project">About this project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-start">Quick Start</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-commands">Other commands</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-tests-and-doc-tests">Unit Tests and Doc Tests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-environment-variables">Setting Environment Variables</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-directory-structure">General Directory Structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-and-output-storage">Data and Output Storage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-conventions">Naming Conventions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies-and-virtual-environments">Dependencies and Virtual Environments</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-pip-requirements">Working with <code class="docutils literal notranslate"><span class="pre">pip</span></code> requirements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-conda-environments">Working with <code class="docutils literal notranslate"><span class="pre">conda</span></code> environments</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mamba-and-conda-performance-issues"><code class="docutils literal notranslate"><span class="pre">mamba</span></code> and <code class="docutils literal notranslate"><span class="pre">conda</span></code> performance issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section class="tex2jax_ignore mathjax_ignore" id="example-project-using-the-chartbook-template">
<h1>Example Project Using the ChartBook Template<a class="headerlink" href="#example-project-using-the-chartbook-template" title="Link to this heading">#</a></h1>
<section id="about-this-project">
<h2>About this project<a class="headerlink" href="#about-this-project" title="Link to this heading">#</a></h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading">#</a></h2>
<p>To quickest way to run code in this repo is to use the following steps. First, you must have the <code class="docutils literal notranslate"><span class="pre">conda</span></code><br />
package manager installed (e.g., via Anaconda). However, I recommend using <code class="docutils literal notranslate"><span class="pre">mamba</span></code>, via [miniforge]
(<a class="github reference external" href="https://github.com/conda-forge/miniforge">conda-forge/miniforge</a>) as it is faster and more lightweight than <code class="docutils literal notranslate"><span class="pre">conda</span></code>. Second, you
must have TexLive (or another LaTeX distribution) installed on your computer and available in your path.
You can do this by downloading and
installing it from here (<a class="reference external" href="https://tug.org/texlive/windows.html#install">windows</a>
and <a class="reference external" href="https://tug.org/mactex/mactex-download.html">mac</a> installers).
Having done these things, open a terminal and navigate to the root directory of the project and create a
conda environment using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">blank</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.12</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">blank</span>
</pre></div>
</div>
<p>and then install the dependencies with pip</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Finally, you can then run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doit</span>
</pre></div>
</div>
<p>And that’s it!</p>
<p>If you would also like to run the R code included in this project, you can either install
R and the required packages manually, or you can use the included <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file.
To do this, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mamba</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>I’m using <code class="docutils literal notranslate"><span class="pre">mamba</span></code> here because <code class="docutils literal notranslate"><span class="pre">conda</span></code> is too slow. Activate the environment.
Then, make sure to uncomment
out the RMarkdown task from the <code class="docutils literal notranslate"><span class="pre">dodo.py</span></code> file. Then,
run <code class="docutils literal notranslate"><span class="pre">doit</span></code> as before.</p>
<section id="other-commands">
<h3>Other commands<a class="headerlink" href="#other-commands" title="Link to this heading">#</a></h3>
<section id="unit-tests-and-doc-tests">
<h4>Unit Tests and Doc Tests<a class="headerlink" href="#unit-tests-and-doc-tests" title="Link to this heading">#</a></h4>
<p>You can run the unit test, including doctests, with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">--</span><span class="n">doctest</span><span class="o">-</span><span class="n">modules</span>
</pre></div>
</div>
<p>You can build the documentation with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">./</span><span class="n">src</span><span class="o">/.</span><span class="n">pytest_cache</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span> 
<span class="n">jupyter</span><span class="o">-</span><span class="n">book</span> <span class="n">build</span> <span class="o">-</span><span class="n">W</span> <span class="o">./</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">del</span></code> instead of rm on Windows</p>
</section>
<section id="setting-environment-variables">
<h4>Setting Environment Variables<a class="headerlink" href="#setting-environment-variables" title="Link to this heading">#</a></h4>
<p>You can
<a class="reference external" href="https://stackoverflow.com/questions/43267413/how-to-set-environment-variables-from-env-file">export your environment variables</a>
from your <code class="docutils literal notranslate"><span class="pre">.env</span></code> files like so, if you wish. This can be done easily in a Linux or Mac terminal with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="o">-</span><span class="n">a</span> <span class="c1">## automatically export all variables</span>
<span class="n">source</span> <span class="o">.</span><span class="n">env</span>
<span class="nb">set</span> <span class="o">+</span><span class="n">a</span>
</pre></div>
</div>
<p>In Windows, this can be done with the included <code class="docutils literal notranslate"><span class="pre">set_env.bat</span></code> file,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">set_env</span><span class="o">.</span><span class="n">bat</span>
</pre></div>
</div>
</section>
</section>
<section id="general-directory-structure">
<h3>General Directory Structure<a class="headerlink" href="#general-directory-structure" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">assets</span></code> folder is used for things like hand-drawn figures or other
pictures that were not generated from code. These things cannot be easily
recreated if they are deleted.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_output</span></code> folder, on the other hand, contains dataframes and figures that are
generated from code. The entire folder should be able to be deleted, because
the code can be run again, which would again generate all of the contents.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">data_manual</span></code> is for data that cannot be easily recreated. This data
should be version controlled. Anything in the <code class="docutils literal notranslate"><span class="pre">_data</span></code> folder or in
the <code class="docutils literal notranslate"><span class="pre">_output</span></code> folder should be able to be recreated by running the code
and can safely be deleted.</p></li>
<li><p>I’m using the <code class="docutils literal notranslate"><span class="pre">doit</span></code> Python module as a task runner. It works like <code class="docutils literal notranslate"><span class="pre">make</span></code> and
the associated <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>s. To rerun the code, install <code class="docutils literal notranslate"><span class="pre">doit</span></code>
(<a class="reference external" href="https://pydoit.org/">https://pydoit.org/</a>) and execute the command <code class="docutils literal notranslate"><span class="pre">doit</span></code> from the <code class="docutils literal notranslate"><span class="pre">src</span></code>
directory. Note that doit is very flexible and can be used to run code
commands from the command prompt, thus making it suitable for projects that
use scripts written in multiple different programming languages.</p></li>
<li><p>I’m using the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file as a container for absolute paths that are private
to each collaborator in the project. You can also use it for private
credentials, if needed. It should not be tracked in Git.</p></li>
</ul>
</section>
<section id="data-and-output-storage">
<h3>Data and Output Storage<a class="headerlink" href="#data-and-output-storage" title="Link to this heading">#</a></h3>
<p>I’ll often use a separate folder for storing data. Any data in the data folder
can be deleted and recreated by rerunning the PyDoit command (the pulls are in
the <a class="reference external" href="http://dodo.py">dodo.py</a> file). Any data that cannot be automatically recreated should be
stored in the “data_manual” folder. Because of the risk of manually-created data
getting changed or lost, I prefer to keep it under version control if I can.
Thus, data in the “_data” folder is excluded from Git (see the .gitignore file),
while the “data_manual” folder is tracked by Git.</p>
<p>Output is stored in the “_output” directory. This includes dataframes, charts, and
rendered notebooks. When the output is small enough, I’ll keep this under
version control. I like this because I can keep track of how dataframes change as my
analysis progresses, for example.</p>
<p>Of course, the _data directory and _output directory can be kept elsewhere on the
machine. To make this easy, I always include the ability to customize these
locations by defining the path to these directories in environment variables,
which I intend to be defined in the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file, though they can also simply be
defined on the command line or elsewhere. The <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> is reponsible for
loading these environment variables and doing some like preprocessing on them.
The <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file is the entry point for all other scripts to these
definitions. That is, all code that references these variables and others are
loading by importing <code class="docutils literal notranslate"><span class="pre">config</span></code>.</p>
</section>
<section id="naming-conventions">
<h3>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">pull_</span></code> vs <code class="docutils literal notranslate"><span class="pre">load_</span></code></strong>: Files or functions that pull data from an external
data source are prepended with “pull_”, as in “pull_fred.py”. Functions that
load data that has been cached in the “<em>data” folder are prepended with “load</em>”.
For example, inside of the <code class="docutils literal notranslate"><span class="pre">pull_CRSP_Compustat.py</span></code> file there is both a
<code class="docutils literal notranslate"><span class="pre">pull_compustat</span></code> function and a <code class="docutils literal notranslate"><span class="pre">load_compustat</span></code> function. The first pulls from
the web, whereas the other loads cached data from the “_data” directory.</p></li>
</ul>
</section>
<section id="dependencies-and-virtual-environments">
<h3>Dependencies and Virtual Environments<a class="headerlink" href="#dependencies-and-virtual-environments" title="Link to this heading">#</a></h3>
<section id="working-with-pip-requirements">
<h4>Working with <code class="docutils literal notranslate"><span class="pre">pip</span></code> requirements<a class="headerlink" href="#working-with-pip-requirements" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">conda</span></code> allows for a lot of flexibility, but can often be slow. <code class="docutils literal notranslate"><span class="pre">pip</span></code>, however, is fast for what it does.  You can install the requirements for this project using the <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file specified here. Do this with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The requirements file can be created like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="nb">list</span> <span class="o">--</span><span class="nb">format</span><span class="o">=</span><span class="n">freeze</span>
</pre></div>
</div>
</section>
<section id="working-with-conda-environments">
<h4>Working with <code class="docutils literal notranslate"><span class="pre">conda</span></code> environments<a class="headerlink" href="#working-with-conda-environments" title="Link to this heading">#</a></h4>
<p>The dependencies used in this environment (along with many other environments commonly used in data science) are stored in the conda environment called <code class="docutils literal notranslate"><span class="pre">blank</span></code> which is saved in the file called <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>. To create the environment from the file (as a prerequisite to loading the environment), use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Now, to load the environment, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">blank</span>
</pre></div>
</div>
<p>Note that an environment file can be created with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">export</span> <span class="o">&gt;</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>However, it’s often preferable to create an environment file manually, as was done with the file in this project.</p>
<p>Also, these dependencies are also saved in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> for those that would rather use pip. Also, GitHub actions work better with pip, so it’s nice to also have the dependencies listed here. This file is created with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">freeze</span> <span class="o">&gt;</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p><strong>Other helpful <code class="docutils literal notranslate"><span class="pre">conda</span></code> commands</strong></p>
<ul class="simple">
<li><p>Create conda environment from file: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">environment.yml</span></code></p></li>
<li><p>Activate environment for this project: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">blank</span></code></p></li>
<li><p>Remove conda environment: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">remove</span> <span class="pre">--name</span> <span class="pre">blank</span> <span class="pre">--all</span></code></p></li>
<li><p>Create blank conda environment: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">--name</span> <span class="pre">myenv</span> <span class="pre">--no-default-packages</span></code></p></li>
<li><p>Create blank conda environment with different version of Python: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">--name</span> <span class="pre">myenv</span> <span class="pre">--no-default-packages</span> <span class="pre">python</span></code> Note that the addition of “python” will install the most up-to-date version of Python. Without this, it may use the system version of Python, which will likely have some packages installed already.</p></li>
</ul>
</section>
<section id="mamba-and-conda-performance-issues">
<h4><code class="docutils literal notranslate"><span class="pre">mamba</span></code> and <code class="docutils literal notranslate"><span class="pre">conda</span></code> performance issues<a class="headerlink" href="#mamba-and-conda-performance-issues" title="Link to this heading">#</a></h4>
<p>Since <code class="docutils literal notranslate"><span class="pre">conda</span></code> has so many performance issues, it’s recommended to use <code class="docutils literal notranslate"><span class="pre">mamba</span></code> instead. I recommend installing the <code class="docutils literal notranslate"><span class="pre">miniforge</span></code> distribution. See here: <a class="github reference external" href="https://github.com/conda-forge/miniforge">conda-forge/miniforge</a></p>
</section>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
   
</div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="apidocs/pull_CRSP_bond_returns/pull_CRSP_bond_returns.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pull_CRSP_bond_returns</span></code></p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about-this-project">About this project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-start">Quick Start</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-commands">Other commands</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-tests-and-doc-tests">Unit Tests and Doc Tests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-environment-variables">Setting Environment Variables</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-directory-structure">General Directory Structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-and-output-storage">Data and Output Storage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-conventions">Naming Conventions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies-and-virtual-environments">Dependencies and Virtual Environments</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-pip-requirements">Working with <code class="docutils literal notranslate"><span class="pre">pip</span></code> requirements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-conda-environments">Working with <code class="docutils literal notranslate"><span class="pre">conda</span></code> environments</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mamba-and-conda-performance-issues"><code class="docutils literal notranslate"><span class="pre">mamba</span></code> and <code class="docutils literal notranslate"><span class="pre">conda</span></code> performance issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jesse Yan and Gabriel Ran
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Jesse Yan and Gabriel Ran.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>